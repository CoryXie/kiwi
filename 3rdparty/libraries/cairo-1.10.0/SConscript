# Copyright (C) 2010 Alex Smith
#
# Kiwi is open source software, released under the terms of the Non-Profit
# Open Software License 3.0. You should have received a copy of the
# licensing information along with the source code distribution. If you
# have not received a copy of the license, please refer to the Kiwi
# project website.
#
# Please note that if you modify this file, the license requires you to
# ADD your name to the list of contributors. This boilerplate is not the
# license itself; please refer to the copy of the license you have received
# for complete terms.

Import('env', 'config')

env.KiwiLibrary('cairo',
	sources = map(lambda x: File('src/' + x), [
		'cairo-analysis-surface.c',
		'cairo-arc.c',
		'cairo-array.c',
		'cairo-atomic.c',
		'cairo-base64-stream.c',
		'cairo-base85-stream.c',
		'cairo-bentley-ottmann.c',
		'cairo-bentley-ottmann-rectangular.c',
		'cairo-bentley-ottmann-rectilinear.c',
		'cairo-botor-scan-converter.c',
		'cairo-boxes.c',
		'cairo.c',
		'cairo-cache.c',
		'cairo-clip.c',
		'cairo-color.c',
		'cairo-composite-rectangles.c',
		'cairo-debug.c',
		'cairo-device.c',
		'cairo-fixed.c',
		'cairo-font-face.c',
		'cairo-font-face-twin.c',
		'cairo-font-face-twin-data.c',
		'cairo-font-options.c',
		'cairo-freelist.c',
		'cairo-freed-pool.c',
		'cairo-gstate.c',
		'cairo-hash.c',
		'cairo-hull.c',
		'cairo-image-info.c',
		'cairo-image-surface.c',
		'cairo-lzw.c',
		'cairo-matrix.c',
		'cairo-recording-surface.c',
		'cairo-misc.c',
		'cairo-mutex.c',
		'cairo-observer.c',
		'cairo-output-stream.c',
		'cairo-paginated-surface.c',
		'cairo-path-bounds.c',
		'cairo-path.c',
		'cairo-path-fill.c',
		'cairo-path-fixed.c',
		'cairo-path-in-fill.c',
		'cairo-path-stroke.c',
		'cairo-pattern.c',
		'cairo-pen.c',
		'cairo-polygon.c',
		'cairo-rectangle.c',
		'cairo-rectangular-scan-converter.c',
		'cairo-region.c',
		'cairo-rtree.c',
		'cairo-scaled-font.c',
		'cairo-slope.c',
		'cairo-spans.c',
		'cairo-spline.c',
		'cairo-stroke-style.c',
		'cairo-surface.c',
		'cairo-surface-fallback.c',
		'cairo-surface-clipper.c',
		'cairo-surface-offset.c',
		'cairo-surface-snapshot.c',
		'cairo-surface-subsurface.c',
		'cairo-surface-wrapper.c',
		'cairo-system.c',
		'cairo-tor-scan-converter.c',
		'cairo-toy-font-face.c',
		'cairo-traps.c',
		'cairo-unicode.c',
		'cairo-user-font.c',
		'cairo-version.c',
		'cairo-wideint.c',
		'cairo-cff-subset.c',
		'cairo-scaled-font-subsets.c',
		'cairo-truetype-subset.c',
		'cairo-type1-fallback.c',
		'cairo-type1-subset.c',
		'cairo-type3-glyph-surface.c',
		'cairo-pdf-operators.c',
		'cairo-deflate-stream.c',
		'cairo-png.c',
		'cairo-ft-font.c',
		'cairo-ps-surface.c',
		'cairo-pdf-surface.c',
		'cairo-svg-surface.c',
	]),
	libraries = ['z', 'png', 'pixman', 'freetype'],
	build_libraries = ['freetype'],
	include_path = Dir('include'),
	flags = {
		'CCFLAGS': filter(lambda f: f[0:2] != '-W', env['CCFLAGS']) + [
			'-Werror',
			'-Wno-redundant-decls',
			'-Wno-enum-compare',
			'-Wno-switch-enum',
			'-Wno-attributes',
			'-fno-strict-aliasing',
			'-fno-common',
		],
		'CPPDEFINES': {
			'HAVE_CONFIG_H': 1,
			'CAIRO_NO_MUTEX': None,
		},
		'CPPPATH': env['CPPPATH'] + ['.'],
	},
)
